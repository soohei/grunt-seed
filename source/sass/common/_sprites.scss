//////////////////////////////
// Sprite image mixin
//////////////////////////////
@mixin sprite {
  display: block;
  overflow: hidden;
  background-repeat: no-repeat;
  text-align: left;
  text-indent: 100%;
  white-space: nowrap;
  overflow: hidden;
  font-size: 1px;
  line-height: 1px;
}

@mixin sprite-background($sprites, $sprites-img, $name, $scale, $skip-base-params:false) {
  background-image: $sprites-img;
  @include background-size(image-width(sprite-path($sprites)) / $scale auto);

  @if not($skip-base-params){
    height: image-height(sprite-file($sprites, $name)) / $scale;
    width: image-width(sprite-file($sprites, $name)) / $scale;
    $ypos: nth(sprite-position($sprites, $name), 2) / $scale;
    background-position: 0 $ypos;
  }
}

$common-sprites: sprite-map("common/*.png", $spacing: 2px);
$common-sprites-img: sprite-url($common-sprites);
$common-sprites_2x: sprite-map("common_2x/*.png", $spacing: 4px);
$common-sprites-img_2x: sprite-url($common-sprites_2x);

@mixin sprite-image-common ($name) {
  .sprite {
    @include sprite;
    @include sprite-background($common-sprites, $common-sprites-img, $name, 1);
  }
  .backgroundsize.retina_2x & {
    .sprite {
      @include sprite-background($common-sprites_2x, $common-sprites-img_2x, $name, 2, true);
    }
  }
}

